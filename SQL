CREATE DATABASE valorant_tournament;
USE valorant_tournament;

-- ユーザー
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    role ENUM('player','organizer') NOT NULL DEFAULT 'player'
);

-- 大会情報
CREATE TABLE tournaments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    date DATETIME NOT NULL,
    format ENUM('single_elim','double_elim','league') DEFAULT 'single_elim',
    status ENUM('open','in_progress','finished') DEFAULT 'open'
);

-- エントリー情報
CREATE TABLE entries (
    id INT AUTO_INCREMENT PRIMARY KEY,
    tournament_id INT NOT NULL,
    team_name VARCHAR(100) NOT NULL,
    members TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (tournament_id) REFERENCES tournaments(id)
);